<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liga MX Calendar - Color Visualizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff8c00, #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.1rem;
            color: #cccccc;
        }

        .color-palette {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            animation: fadeInUp 1s ease-out 0.2s both;
        }

        .color-box {
            width: 120px;
            height: 80px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .color-box:hover {
            transform: translateY(-5px);
        }

        .color-primary {
            background-color: #ff8c00;
            color: #000000;
        }

        .color-dark {
            background-color: #000000;
            color: #ffffff;
            border: 2px solid #ff8c00;
        }

        .color-white {
            background-color: #ffffff;
            color: #000000;
        }

        .calendar-container {
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeInUp 1s ease-out 0.4s both;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 140, 0, 0.1);
            border-radius: 15px;
            border: 1px solid #ff8c00;
        }

        .nav-button {
            background: linear-gradient(45deg, #ff8c00, #ffaa33);
            color: #000000;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .nav-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 140, 0, 0.4);
        }

        .nav-button:disabled {
            background: #666666;
            color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .jornada-info {
            text-align: center;
        }

        .jornada-info h2 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            color: #ff8c00;
        }

        .jornada-info p {
            color: #cccccc;
            font-size: 1rem;
        }

        .matches-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .match-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 140, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .match-card:hover {
            border-color: #ff8c00;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 140, 0, 0.2);
        }

        .match-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .team {
            font-size: 1.1rem;
            font-weight: bold;
            color: #ffffff;
        }

        .vs {
            color: #ff8c00;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .match-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9rem;
            color: #cccccc;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .detail-icon {
            color: #ff8c00;
            font-weight: bold;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #ff8c00;
            font-size: 1.2rem;
        }

        .error {
            text-align: center;
            padding: 40px;
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 10px;
            border: 1px solid #ff6b6b;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .color-palette {
                flex-wrap: wrap;
                gap: 15px;
            }

            .color-box {
                width: 100px;
                height: 70px;
                font-size: 0.8rem;
            }

            .calendar-header {
                flex-direction: column;
                gap: 20px;
            }

            .nav-button {
                min-width: 100px;
                padding: 10px 15px;
                font-size: 0.9rem;
            }

            .matches-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .match-details {
                grid-template-columns: 1fr;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Liga MX Calendar</h1>
        <p>Color Visualizer - Negro, Blanco y Naranja</p>
    </div>

    <div class="color-palette">
        <div class="color-box color-primary">
            Naranja<br>#ff8c00
        </div>
        <div class="color-box color-dark">
            Negro<br>#000000
        </div>
        <div class="color-box color-white">
            Blanco<br>#ffffff
        </div>
    </div>

    <div class="calendar-container">
        <div class="calendar-header">
            <button class="nav-button" id="prevBtn" onclick="navigateJornada(-1)">
                ⬅️ Anterior
            </button>
            
            <div class="jornada-info">
                <h2 id="jornadaTitle">Cargando...</h2>
                <p id="jornadaFechas">Obteniendo datos...</p>
            </div>
            
            <button class="nav-button" id="nextBtn" onclick="navigateJornada(1)">
                Siguiente ➡️
            </button>
        </div>

        <div id="matchesContainer">
            <div class="loading">
                ⚽ Cargando calendario Liga MX...
            </div>
        </div>
    </div>

    <script>
        let calendarData = {};
        let currentJornada = 1;
        let totalJornadas = 0;

        // Load calendar data when page loads
        async function loadCalendarData() {
            try {
                const response = await fetch('/api/calendar');
                if (!response.ok) {
                    throw new Error(`Error ${response.status}: ${response.statusText}`);
                }
                
                calendarData = await response.json();
                totalJornadas = calendarData.jornadas ? calendarData.jornadas.length : 0;
                
                if (totalJornadas > 0) {
                    console.log(`✅ Calendar loaded: ${totalJornadas} jornadas disponibles`);
                    displayJornada(currentJornada);
                } else {
                    throw new Error('No jornadas found in calendar data');
                }
            } catch (error) {
                console.error('❌ Error loading calendar:', error);
                showError('Error al cargar el calendario: ' + error.message);
            }
        }

        function displayJornada(jornadaNum) {
            if (!calendarData.jornadas || jornadaNum < 1 || jornadaNum > totalJornadas) {
                showError('Jornada no encontrada');
                return;
            }

            const jornada = calendarData.jornadas[jornadaNum - 1];
            
            // Update header
            document.getElementById('jornadaTitle').textContent = `Jornada ${jornada.numero}`;
            document.getElementById('jornadaFechas').textContent = jornada.fechas;
            
            // Update navigation buttons
            document.getElementById('prevBtn').disabled = jornadaNum <= 1;
            document.getElementById('nextBtn').disabled = jornadaNum >= totalJornadas;

            // Display matches
            displayMatches(jornada.partidos);
            
            currentJornada = jornadaNum;
        }

        function displayMatches(partidos) {
            const container = document.getElementById('matchesContainer');
            
            if (!partidos || partidos.length === 0) {
                container.innerHTML = '<div class="error">No hay partidos para esta jornada</div>';
                return;
            }

            const matchesHTML = partidos.map(partido => `
                <div class="match-card">
                    <div class="match-teams">
                        <div class="team">${partido.local}</div>
                        <div class="vs">VS</div>
                        <div class="team">${partido.visitante}</div>
                    </div>
                    <div class="match-details">
                        <div class="detail-item">
                            <span class="detail-icon">📅</span>
                            <span>${partido.dia}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">🕐</span>
                            <span>${partido.hora}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">🏟️</span>
                            <span>${partido.estadio}</span>
                        </div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = `<div class="matches-grid">${matchesHTML}</div>`;
        }

        function navigateJornada(direction) {
            const newJornada = currentJornada + direction;
            if (newJornada >= 1 && newJornada <= totalJornadas) {
                displayJornada(newJornada);
            }
        }

        function showError(message) {
            document.getElementById('matchesContainer').innerHTML = 
                `<div class="error">❌ ${message}</div>`;
        }

        // Keyboard navigation
        document.addEventListener('keydown', (event) => {
            switch(event.key) {
                case 'ArrowLeft':
                    navigateJornada(-1);
                    break;
                case 'ArrowRight':
                    navigateJornada(1);
                    break;
            }
        });

        // Initialize app
        window.addEventListener('DOMContentLoaded', loadCalendarData);
    </script>
</body>
</html>